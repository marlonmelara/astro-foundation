---
import MainLayout from "../layouts/MainLayout.astro";

// Server only
const name = "Marlon";
---

<MainLayout title="Home Page">
  <h1>¡Hola, Astro!</h1>
  <p>Hola {name}</p>
  <p>Hora actual: <b>{new Date().toLocaleTimeString()}</b></p>
  <p id="time">Hora actual real: <b>{new Date().toLocaleTimeString()}</b></p>

  <script>
    // Client only
    // --- Inicio de la mejora para el reloj ---
    const timeElement = document.querySelector("#time") as HTMLParagraphElement;

    // 1. Creamos una función dedicada a actualizar la hora
    function updateClock() {
      const currentTime: string = new Date().toLocaleTimeString();
      // Usamos innerHTML para poder mantener la etiqueta <b>
      timeElement.innerHTML = `Hora actual real: <b>${currentTime}</b>`;
    }

    // 2. La ejecutamos una vez al cargar la página
    updateClock();

    // 3. Le decimos al navegador que la ejecute cada segundo (1000 ms)
    setInterval(updateClock, 1000);
    // --- Fin de la mejora ---
  </script>
</MainLayout>
